# UT_FreelyDrafts ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ–‡ä»¶ç”¨é€”
`UT_FreelyDrafts.cxx` æ˜¯ä¸€ä¸ª**æµ‹è¯•å¼€å‘å·¥ä½œå°**ï¼Œæä¾›å®Œæ•´çš„TDDæµ‹è¯•è®¾è®¡æ¡†æ¶ï¼š
- ğŸ’­ å¿«é€Ÿè®°å½•æµ‹è¯•æƒ³æ³•ï¼ˆè‡ªç”±è‰ç¨¿ï¼‰
- ğŸ—ï¸ ä»æƒ³æ³•æ¼”è¿›åˆ°æ­£å¼æµ‹è¯•ç”¨ä¾‹
- ğŸ“š æä¾›ç»“æ„åŒ–çš„æµ‹è¯•è®¾è®¡æ¨¡æ¿
- ğŸ”§ å®éªŒå’ŒéªŒè¯æ–°çš„æµ‹è¯•æ–¹æ³•
- ğŸ“‹ åŒ…å«15ç§æµ‹è¯•åˆ†ç±»æŒ‡å¯¼
- ğŸ¯ éµå¾ª IMPROVE VALUEã€AVOID LOSTã€BALANCE SKILL vs COST åŸåˆ™

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è‡ªç”±è‰ç¨¿é˜¶æ®µ
```cpp
// åœ¨æ–‡ä»¶æœ«å°¾ç›´æ¥å†™ä¸‹ä½ çš„æƒ³æ³•
TEST(UT_FreelyDrafts, myQuickIdea) {
    // ä»»ä½•æƒ³æ³•éƒ½å¯ä»¥å…ˆå†™åœ¨è¿™é‡Œ
    printf("Testing my idea about...\n");
    // ä¸ç”¨æ‹…å¿ƒæ ¼å¼ï¼Œå…ˆæŠŠæƒ³æ³•è®°å½•ä¸‹æ¥
}
```

### 2. ç»“æ„åŒ–é˜¶æ®µ
å½“æƒ³æ³•å˜å¾—æ¸…æ™°æ—¶ï¼Œä½¿ç”¨æä¾›çš„æ¨¡æ¿ï¼š
```cpp
TEST(UT_MyModule, verifyBehavior_byAction_expectResult) {
    //===SETUP===
    // å‡†å¤‡æµ‹è¯•ç¯å¢ƒ
    
    //===BEHAVIOR===
    // æ‰§è¡Œè¢«æµ‹è¯•çš„è¡Œä¸º
    
    //===VERIFY===
    // éªŒè¯ç»“æœ
    
    //===CLEANUP===
    // æ¸…ç†èµ„æº
}
```

## ğŸ“‹ æµ‹è¯•åˆ†ç±»å®Œæ•´æŒ‡å—

> ğŸ”„ **ä¼˜å…ˆçº§æ’åº**: Typical â†’ Boundary â†’ State â†’ Fault â†’ Performance â†’ Concurrency â†’ Others

### ğŸ… ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ˆå¿…é¡»è¦†ç›–ï¼‰

| åˆ†ç±»               | ç”¨é€”         | å…³æ³¨ç‚¹                          | å…¸å‹ç¤ºä¾‹                        | ä½¿ç”¨æ—¶æœº                 |
| ------------------ | ------------ | ------------------------------- | ------------------------------- | ------------------------ |
| **ğŸ†“ FreelyDrafts** | è‡ªç”±æƒ³æ³•è®°å½• | å¿«é€Ÿå¤´è„‘é£æš´ï¼Œåˆ›æ„æ€è€ƒ          | ä»»ä½•ç›´è§‰æµ‹è¯•æƒ³æ³•ï¼Œ"å‡å¦‚"åœºæ™¯    | æ—©æœŸæ¢ç´¢ï¼Œæ–°åŠŸèƒ½åˆ†æ     |
| **â­ Typical**      | å…¸å‹ç”¨ä¾‹éªŒè¯ | æ ¸å¿ƒåŠŸèƒ½ï¼Œæ ‡å‡†å·¥ä½œæµ            | IOCæœåŠ¡æ³¨å†Œ/æŸ¥æ‰¾ï¼Œäº‹ä»¶è®¢é˜…/å‘å¸ƒ | ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ŒåŸºç¡€è¡Œä¸ºéªŒè¯ |
| **ğŸ”² Boundary**     | è¾¹ç•Œæ¡ä»¶æµ‹è¯• | æœ€å°/æœ€å¤§å€¼ï¼Œç©ºå€¼è¾“å…¥ï¼Œæº¢å‡ºæ¡ä»¶ | é›¶è¶…æ—¶ï¼Œæœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ï¼Œç©ºæŒ‡é’ˆ  | é«˜ä¼˜å…ˆçº§ï¼Œå…¸å‹ç”¨ä¾‹ä¹‹å   |

### ğŸ¥ˆ ç¬¬äºŒä¼˜å…ˆçº§ï¼ˆé‡è¦ç»„ä»¶ï¼‰

| åˆ†ç±»             | ç”¨é€”         | å…³æ³¨ç‚¹                   | å…¸å‹ç¤ºä¾‹                       | ä½¿ç”¨æ—¶æœº             |
| ---------------- | ------------ | ------------------------ | ------------------------------ | -------------------- |
| **ğŸ”„ State**      | çŠ¶æ€è½¬æ¢éªŒè¯ | å¯¹è±¡ç”Ÿå‘½å‘¨æœŸï¼ŒçŠ¶æ€ä¸€è‡´æ€§ | æœåŠ¡çŠ¶æ€æœºï¼Œäº‹ä»¶çŠ¶æ€è½¬æ¢       | æœ‰çŠ¶æ€ç»„ä»¶ï¼ŒFSMéªŒè¯  |
| **âš ï¸ Fault**      | æ•…éšœå¤„ç†éªŒè¯ | ç³»ç»Ÿæ•…éšœï¼Œå¤–éƒ¨ä¾èµ–å¤±è´¥   | è¿›ç¨‹å´©æºƒæ¢å¤ï¼Œç½‘ç»œæ•…éšœï¼Œç£ç›˜æ»¡ | å…³é”®ç³»ç»Ÿå¯é æ€§è¦æ±‚   |
| **ğŸ† Capability** | èƒ½åŠ›æé™éªŒè¯ | æ€§èƒ½é˜ˆå€¼ï¼Œèµ„æºé™åˆ¶       | æœ€å¤§å¹¶å‘äº‹ä»¶ï¼Œç¼“å†²åŒºå®¹é‡é™åˆ¶   | å…¸å‹ç”¨ä¾‹åï¼Œå®¹é‡è§„åˆ’ |

### ğŸ¥‰ ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼ˆæ€§èƒ½ä¸è´¨é‡ï¼‰

| åˆ†ç±»              | ç”¨é€”       | å…³æ³¨ç‚¹                   | å…¸å‹ç¤ºä¾‹                      | ä½¿ç”¨æ—¶æœº                 |
| ----------------- | ---------- | ------------------------ | ----------------------------- | ------------------------ |
| **âš¡ Performance** | æ€§èƒ½æµ‹è¯•   | é€Ÿåº¦ï¼Œå†…å­˜æ¶ˆè€—ï¼Œååé‡   | APIè°ƒç”¨å»¶è¿Ÿï¼Œå†…å­˜æ³„æ¼æ£€æµ‹     | åŠŸèƒ½æµ‹è¯•åï¼Œæ€§èƒ½è¦æ±‚     |
| **ğŸš€ Concurrency** | å¹¶å‘æµ‹è¯•   | çº¿ç¨‹å®‰å…¨ï¼Œç«æ€æ¡ä»¶ï¼Œæ­»é” | å¹¶è¡ŒAPIè°ƒç”¨ï¼Œå…±äº«èµ„æºè®¿é—®     | å¤šçº¿ç¨‹ç»„ä»¶ï¼Œé«˜å¤æ‚åº¦åœºæ™¯ |
| **ğŸ›¡ï¸ Robust**      | é²æ£’æ€§æµ‹è¯• | èµ„æºè€—å°½ï¼Œé‡å¤æ“ä½œ       | ç¼“å†²åŒºæ»¡/ç©ºå¾ªç¯ï¼Œé‡å¤è¾¾åˆ°å®¹é‡ | ç¨³å®šæ€§éªŒè¯ï¼Œé•¿æ—¶é—´è¿è¡Œ   |

### ğŸ… ç‰¹æ®Šç”¨é€”ï¼ˆæŒ‰éœ€ä½¿ç”¨ï¼‰

| åˆ†ç±»                | ç”¨é€”       | å…³æ³¨ç‚¹                   | å…¸å‹ç¤ºä¾‹                         | ä½¿ç”¨æ—¶æœº                 |
| ------------------- | ---------- | ------------------------ | -------------------------------- | ------------------------ |
| **ğŸš« Misuse**        | è¯¯ç”¨æ£€æµ‹   | APIè¯¯ç”¨ï¼Œé”™è¯¯è°ƒç”¨åºåˆ—    | é”™è¯¯å‚æ•°é¡ºåºï¼Œéæ³•çŠ¶æ€è½¬æ¢       | APIé²æ£’æ€§ï¼Œç”¨æˆ·é”™è¯¯é¢„é˜²  |
| **ğŸ¨ Demo/Example**  | ç«¯åˆ°ç«¯æ¼”ç¤º | å®Œæ•´å·¥ä½œæµï¼Œé›†æˆåœºæ™¯     | å®Œæ•´äº§å“åŠŸèƒ½æ¼”ç¤ºï¼Œæ•™ç¨‹ç¤ºä¾‹       | æ–‡æ¡£ï¼Œç”¨æˆ·æŒ‡å—ï¼ŒåŠŸèƒ½å±•ç¤º |
| **ğŸ”„ Compatibility** | å…¼å®¹æ€§æµ‹è¯• | è·¨å¹³å°ï¼Œç‰ˆæœ¬å…¼å®¹æ€§       | Windows/Linux/macOSï¼ŒAPIç‰ˆæœ¬å…¼å®¹ | å¤šå¹³å°äº§å“ï¼Œç‰ˆæœ¬å‡çº§     |
| **ğŸ›ï¸ Configuration** | é…ç½®æµ‹è¯•   | è®¾ç½®ï¼Œç¯å¢ƒå˜é‡ï¼ŒåŠŸèƒ½å¼€å…³ | Debug/Releaseæ¨¡å¼ï¼Œä¸åŒæ—¥å¿—çº§åˆ«  | å¯é…ç½®ç³»ç»Ÿï¼Œéƒ¨ç½²å˜åŒ–     |

## ğŸ”„ æµ‹è¯•è®¾è®¡æµç¨‹

### ğŸ“ å®Œæ•´è®¾è®¡æµç¨‹
1. **ğŸ’­ è‡ªç”±æƒ³æ³•é˜¶æ®µ**: åœ¨FreelyDraftsä¸­è®°å½•ä»»ä½•æµ‹è¯•æƒ³æ³•
2. **ï¿½ éœ€æ±‚åˆ†æé˜¶æ®µ**: å°†æƒ³æ³•è½¬æ¢ä¸ºUser Storyï¼ˆç”¨æˆ·æ•…äº‹ï¼‰
3. **âœ… éªŒæ”¶æ ‡å‡†é˜¶æ®µ**: å®šä¹‰Acceptance Criteriaï¼ˆéªŒæ”¶æ ‡å‡†ï¼‰
4. **ğŸ§ª æµ‹è¯•ç”¨ä¾‹é˜¶æ®µ**: ç¼–å†™å…·ä½“çš„Test Casesï¼ˆæµ‹è¯•ç”¨ä¾‹ï¼‰
5. **âš¡ å®ç°é˜¶æ®µ**: ç¼–å†™æµ‹è¯•ä»£ç å’Œæ–­è¨€
6. **ğŸ”§ é‡æ„é˜¶æ®µ**: å°†æˆç†Ÿæµ‹è¯•ç§»åŠ¨åˆ°ä¸“é—¨æ–‡ä»¶

### ğŸ¯ åˆ†ç±»é€‰æ‹©ç­–ç•¥
```
ç®€å•ç³»ç»Ÿ: Typical + Boundary + State
ä¸­ç­‰ç³»ç»Ÿ: + Performance + Capability  
å¤æ‚ç³»ç»Ÿ: + Concurrency + Robust
å…³é”®ç³»ç»Ÿ: + Fault + Misuse + Regression
```

### ğŸ“Š æµ‹è¯•è¦†ç›–åº¦å»ºè®®
- **ğŸ¥‡ å¿…é¡»è¦†ç›–** (100%): Typical
- **ğŸ¥ˆ é«˜åº¦è¦†ç›–** (80%): Boundary + State  
- **ğŸ¥‰ é€‚åº¦è¦†ç›–** (60%): Performance + Fault
- **ğŸ… é€‰æ‹©è¦†ç›–** (30%): Concurrency + Robust + Others

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•
- å…ˆå†™æƒ³æ³•ï¼Œåæ•´ç†æ ¼å¼
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°
- ä¿æŒæ¯ä¸ªæµ‹è¯•æ¡ˆä¾‹çš„ç‹¬ç«‹æ€§
- å®šæœŸå°†æˆç†Ÿçš„æµ‹è¯•ç§»åŠ¨åˆ°ä¸“é—¨æ–‡ä»¶

### âŒ é¿å…äº‹é¡¹
- ä¸è¦åœ¨è‰ç¨¿é˜¶æ®µçº ç»“æ ¼å¼
- é¿å…è¿‡äºå¤æ‚çš„æµ‹è¯•é€»è¾‘
- ä¸è¦è®©FreelyDraftsæ–‡ä»¶è¿‡äºåºå¤§

## ğŸ¯ å‘½åçº¦å®š

### æµ‹è¯•ç”¨ä¾‹å‘½å
```
verify[è¢«æµ‹è¡Œä¸º]_by[æµ‹è¯•åŠ¨ä½œ]_expect[æœŸæœ›ç»“æœ]
```

ç¤ºä¾‹ï¼š
- `verifyServiceRegistration_byValidInput_expectSuccess`
- `verifyEventHandling_byNullPointer_expectFailure`

### æµ‹è¯•å¥—ä»¶å‘½å
```
UT_[æ¨¡å—å]_[æµ‹è¯•ç±»åˆ«]
```

ç¤ºä¾‹ï¼š
- `UT_IOCService_Typical`
- `UT_EventQueue_Boundary`

## ğŸ“š ç›¸å…³æ–‡ä»¶å’Œèµ„æº

### ğŸ”— é¡¹ç›®æ–‡ä»¶ç»“æ„
```
Test/
â”œâ”€â”€ UT_FreelyDrafts.cxx           # ä¸»æ¨¡æ¿æ–‡ä»¶ï¼ˆæœ¬æŒ‡å—å¯¹åº”ï¼‰
â”œâ”€â”€ UT_FreelyDrafts.md            # æ¨¡æ¿æ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”œâ”€â”€ _UT_IOC_Common.h              # é€šç”¨æµ‹è¯•å·¥å…·å’Œå®
â”œâ”€â”€ UT_*Typical.cxx               # å„æ¨¡å—å…¸å‹ç”¨ä¾‹æµ‹è¯•
â””â”€â”€ UT_*Typical.md                # å„æ¨¡å—å…¸å‹ç”¨ä¾‹æ–‡æ¡£ï¼ˆæŒ‰éœ€ï¼‰
```

### ğŸ“– å­¦ä¹ èµ„æº
- **Google Testæ–‡æ¡£**: äº†è§£gtestæ¡†æ¶ç”¨æ³•
- **TDDå®è·µæŒ‡å—**: æµ‹è¯•é©±åŠ¨å¼€å‘æœ€ä½³å®è·µ
- **Clean Code**: ç¼–å†™å¯ç»´æŠ¤çš„æµ‹è¯•ä»£ç 
- **Working Effectively with Legacy Code**: é—ç•™ä»£ç æµ‹è¯•ç­–ç•¥

### ğŸ”§ å¼€å‘å·¥å…·æ¨è
- **IDEæ’ä»¶**: Google Test Explorer, Test Runner
- **ä»£ç è¦†ç›–**: gcov, lcov ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
- **é™æ€åˆ†æ**: cppcheck, clang-analyzer
- **æ€§èƒ½åˆ†æ**: valgrind, perf

### ğŸ“ è·å–å¸®åŠ©
- ğŸ“§ é‡åˆ°é—®é¢˜æ—¶ï¼ŒæŸ¥çœ‹ç°æœ‰çš„UT_*æ–‡ä»¶ä½œä¸ºå‚è€ƒ
- ğŸ” ä½¿ç”¨grepæœç´¢ç±»ä¼¼çš„æµ‹è¯•æ¨¡å¼
- ğŸ’¡ åœ¨FreelyDraftsä¸­å…ˆè®°å½•é—®é¢˜å’Œæƒ³æ³•
- ğŸ¤ ä¸å›¢é˜Ÿè®¨è®ºå¤æ‚çš„æµ‹è¯•åœºæ™¯è®¾è®¡

---
> ğŸ’¡ **è®°ä½**: å¥½çš„æµ‹è¯•ä¸ä»…éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§ï¼Œè¿˜åº”è¯¥ä½œä¸ºæ´»æ–‡æ¡£å¸®åŠ©ç†è§£ä»£ç æ„å›¾ï¼

## ğŸ› ï¸ å®ç”¨å·¥å…·å’ŒæŠ€å·§

### ğŸ“ å¿«é€Ÿæµ‹è¯•æ¨¡æ¿

#### æœ€ç®€è‰ç¨¿æ¨¡æ¿
```cpp
TEST(UT_FreelyDrafts, quickIdea_æè¿°ä½ çš„æƒ³æ³•) {
    printf("IDEA: æµ‹è¯•å…³äº...\n");
    // å¿«é€Ÿå†™ä¸‹æƒ³æ³•ï¼Œä¸ç”¨è€ƒè™‘æ ¼å¼
    ASSERT_TRUE(true); // å ä½ç¬¦
}
```

#### æ ‡å‡†æµ‹è¯•æ¨¡æ¿
```cpp
TEST(UT_ModuleName_Category, verifyBehavior_byAction_expectResult) {
    //===SETUP===
    // 1. åˆå§‹åŒ–æµ‹è¯•ç¯å¢ƒ
    // 2. å‡†å¤‡æµ‹è¯•æ•°æ®
    
    //===BEHAVIOR===
    printf("BEHAVIOR: æè¿°æ­£åœ¨æµ‹è¯•çš„è¡Œä¸º\n");
    // æ‰§è¡Œè¢«æµ‹è¯•çš„æ“ä½œ
    
    //===VERIFY===
    // å…³é”®éªŒè¯ç‚¹ï¼ˆâ‰¤3ä¸ªï¼‰
    ASSERT_EQ(expected, actual);
    
    //===CLEANUP===
    // æ¸…ç†èµ„æº
}
```

#### å‚æ•°åŒ–æµ‹è¯•æ¨¡æ¿
```cpp
struct TestData {
    std::string input;
    int expected;
    std::string description;
};

class ParameterizedTest : public ::testing::TestWithParam<TestData> {};

TEST_P(ParameterizedTest, verifyBehavior_byDifferentInputs_expectCorrectResults) {
    auto data = GetParam();
    printf("Testing: %s\n", data.description.c_str());
    
    // æµ‹è¯•é€»è¾‘
    auto result = functionUnderTest(data.input);
    ASSERT_EQ(data.expected, result);
}

INSTANTIATE_TEST_SUITE_P(
    CategoryName,
    ParameterizedTest,
    ::testing::Values(
        {"input1", 1, "æ­£å¸¸æƒ…å†µ"},
        {"", 0, "ç©ºè¾“å…¥"},
        {"invalid", -1, "æ— æ•ˆè¾“å…¥"}
    )
);
```

### ğŸ” è°ƒè¯•å’Œè¯Šæ–­æŠ€å·§

#### ä¿¡æ¯ä¸°å¯Œçš„æ–­è¨€
```cpp
// âŒ ä¸å¥½çš„æ–­è¨€
ASSERT_TRUE(result);

// âœ… å¥½çš„æ–­è¨€
ASSERT_TRUE(result) << "Service registration failed for ID: " << serviceId 
                   << ", Error: " << lastError;
```


### ğŸ“Š æµ‹è¯•ç»„ç»‡ç­–ç•¥

#### æŒ‰åŠŸèƒ½ç»„ç»‡
```
UT_ServiceRegistration_Typical.cxx
UT_ServiceRegistration_Boundary.cxx
UT_ServiceRegistration_Concurrency.cxx
```

#### æŒ‰åˆ†ç±»ç»„ç»‡
```
UT_IOC_Typical.cxx      // æ‰€æœ‰æ¨¡å—çš„å…¸å‹ç”¨ä¾‹
UT_IOC_Boundary.cxx     // æ‰€æœ‰æ¨¡å—çš„è¾¹ç•Œæµ‹è¯•
UT_IOC_Performance.cxx  // æ‰€æœ‰æ¨¡å—çš„æ€§èƒ½æµ‹è¯•
```

### ğŸ¯ æµ‹è¯•é‡æ„æŒ‡å¯¼

#### ä»è‰ç¨¿åˆ°æ­£å¼æµ‹è¯•çš„æ¼”è¿›
1. **è‰ç¨¿é˜¶æ®µ**: åœ¨FreelyDraftsä¸­å¿«é€Ÿè®°å½•
2. **éªŒè¯é˜¶æ®µ**: éªŒè¯æµ‹è¯•æƒ³æ³•çš„æœ‰æ•ˆæ€§
3. **å®Œå–„é˜¶æ®µ**: æ·»åŠ å®Œæ•´çš„Setup/Teardown
4. **åˆ†ç±»é˜¶æ®µ**: ç§»åŠ¨åˆ°åˆé€‚çš„åˆ†ç±»æ–‡ä»¶
5. **ä¼˜åŒ–é˜¶æ®µ**: é‡æ„é‡å¤ä»£ç ï¼Œæå–å…¬å…±å‡½æ•°

#### ä½•æ—¶ç§»åŠ¨æµ‹è¯•
- âœ… æµ‹è¯•é€»è¾‘ç¨³å®šä¸”æœ‰æ•ˆ
- âœ… æœ‰æ¸…æ™°çš„æµ‹è¯•ç›®æ ‡å’ŒæœŸæœ›
- âœ… åŒ…å«å®Œæ•´çš„Setup/Verify/Cleanup
- âœ… æœ‰é€‚å½“çš„é”™è¯¯æ¶ˆæ¯å’Œè¯Šæ–­ä¿¡æ¯
